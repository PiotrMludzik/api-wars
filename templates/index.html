{% extends "base.html" %}
{% block page_title %}Star Wars {{ subjectName }} list{% endblock %}
{% block contents %}
    <!-- Subject data table -->
    <table class="table table-bordered table-striped">
        <!-- Header names -->
        <thead class="table-dark">
            <tr>
                {% for name in columnNames %}
                    <th>{{ name }}</th>
                {% endfor %}
            </tr>
        </thead>
        <!-- Subject data -->
        <tbody>
            {% for item in subjectData %}  <!-- all data -->
                <tr>
                    {% set firstLoop = loop %}
                    {% for key, value in item.items() %}  <!-- record -->
                        <td class="{{ key }}">
                            {% if key in buttonColumnName %}  <!-- column with button -->
                                {% set buttonData = buttonColumnData[firstLoop.index - 1][key] %}
                                {% set buttonDataNumbers = buttonData|length %}
                                {% if buttonDataNumbers > 0 %}
                                    <!-- Insert button data -->
                                    <button type="button"
                                            class="btn btn-sm btn-secondary button-data"
                                            data-toggle="modal"
                                            data-target="#modal-button-data"
                                            data-record-name="{{ item.name }}"
                                            data-button-data-name="{{ key }}"
                                            data-button-data="{{ buttonData }}"
                                    >
                                        {% if buttonDataNumbers == 1 %}
                                            1 {{ key[:-1] }}
                                        {% else %}
                                            {{ buttonDataNumbers }} {{ key }}
                                        {% endif %}
                                    </button>
                                {% else %}
                                    No known {{ key }}
                                {% endif %}
                            {% else %}  <!-- data in the cell -->
                                {{ value }}
                            {% endif %}
                        </td>
                    {% endfor %}
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}