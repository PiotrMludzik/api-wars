{% extends "base.html" %}
{% block page_title %}Star Wars {{ subject_name }} list{% endblock %}
{% block contents %}
    <!-- Subject data table -->
    <table class="table table-bordered table-striped">
        <!-- Header names -->
        <thead class="table-dark">
            <tr>
                {% for name in column_names %}
                    <th>{{ name }}</th>
                {% endfor %}
            </tr>
        </thead>

        <!-- Subject data -->
        <tbody>
            {% for item in subject_data %}
                <tr>
                    {% set firstLoop = loop %}
                    {% for key, value in item.items() %}
                        <td class="{{ key }}">
                            {% if key in button_data['column name'] %}
                                {% set data = button_data['data'][firstLoop.index - 1][key] %}
                                {% set data_numbers = data|length %}
                                {% if data_numbers > 0 %}
                                    <!-- Button data -->
                                    <button type="button"
                                            class="btn btn-sm btn-secondary button-data"
                                            data-toggle="modal"
                                            data-target="#modal-button-data"
                                            data-record-name="{{ item.name }}"
                                            data-column-name="{{ key }}"
                                            data-data="{{ data }}"
                                    >
                                        {% if data_numbers == 1 %}
                                            1 {{ key[:-1] }}
                                        {% else %}
                                            {{ data_numbers }} {{ key }}
                                        {% endif %}
                                    </button>
                                {% else %}
                                    No known {{ key }}
                                {% endif %}
                            {% else %}
                                {{ value }}
                            {% endif %}
                        </td>
                    {% endfor %}
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}